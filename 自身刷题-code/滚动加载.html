<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>滚动加载示例</title>
</head>
<body>
<div id="content">
    <!-- 加载的数据内容将显示在这里 -->
</div>

<script>
    // 设定滚动加载的触发距离
    const LOAD_DISTANCE = 100; // 距离底部100px时触发加载
    let loading = false; // 防止重复请求

    // 模拟后端数据请求的函数
    function fetchData(page) {
        return new Promise((resolve) => {
            setTimeout(() => {
                // 模拟返回的数据
                const newData = Array.from({ length: 10 }, (_, i) => `Item ${(page - 1) * 10 + i + 1}`);
                resolve(newData);
            }, 1000); // 模拟延迟1秒
        });
    }

    // 渲染数据的函数
    function renderData(data) {
        const content = document.getElementById('content');
        data.forEach(item => {
            const div = document.createElement('div');
            div.textContent = item;
            content.appendChild(div);
        });
    }

    // 监听滚动事件，检查是否接近页面底部
    window.addEventListener('scroll', () => {
        if (loading) return; // 如果当前正在加载中，则不再请求

        // 获取页面的滚动位置和文档高度
        const scrollPosition = window.scrollY + window.innerHeight;
        const documentHeight = document.documentElement.scrollHeight;

        // 如果滚动到距离底部LOAD_DISTANCE的位置，触发加载新数据
        if (documentHeight - scrollPosition <= LOAD_DISTANCE) {
            loading = true;
            const nextPage = Math.ceil(document.getElementById('content').children.length / 10) + 1; // 假设每页有10条数据

            fetchData(nextPage).then(newData => {
                renderData(newData);
                loading = false; // 数据加载完毕，允许下一次加载
            });
        }
    });

    // 初始化加载数据
    fetchData(1).then(initialData => {
        renderData(initialData);
    });
</script>
</body>
</html>